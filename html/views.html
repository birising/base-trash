<div class="notice-banner" role="status" aria-label="Upozornění: neoficiální aplikace, data testovací">
  <span class="notice-label">NEOFICIÁLNÍ APLIKACE</span>
  <span>Data jsou zatím pouze testovací.</span>
</div>

<section class="dashboard-strip" aria-label="Rychlé přehledy">
  <div class="strip-header">
    <div>
      <div class="eyebrow">Dashboard</div>
      <div class="headline small">Rychlé přehledy</div>
      <p class="subtitle">Aktuální data z odvozu, hladiny, košů, lamp a údržby zeleně na jednom místě.</p>
    </div>
  </div>
  <div class="summary-grid dashboard-grid">
    <button class="stat-card" data-category="odpad">
      <div class="stat-top">
        <span class="stat-label">Odpad &amp; sběrný dvůr</span>
        <span class="stat-chip">Plán</span>
      </div>
      <div class="stat-value" id="countOdpad">–</div>
      <div class="stat-sub" id="nextPickupSummary">Každých 14 dní · otevřený dvůr</div>
    </button>
    <button class="stat-card" data-category="hladina">
      <div class="stat-top">
        <span class="stat-label">Hladina potoka</span>
        <span class="stat-chip">Live</span>
      </div>
      <div class="stat-value" id="countHladina">–</div>
      <div class="stat-sub" id="levelReading">Načítám…</div>
    </button>
    <button class="stat-card active" data-category="kose">
      <div class="stat-top">
        <span class="stat-label">Koše</span>
        <span class="stat-chip">Live</span>
      </div>
      <div class="stat-value" id="countKose">0</div>
      <div class="stat-sub">Naplněnost &amp; telemetrie</div>
    </button>
    <button class="stat-card" data-category="lampy">
      <div class="stat-top">
        <span class="stat-label">Lampy</span>
        <span class="stat-chip">Sítě</span>
      </div>
      <div class="stat-value" id="countLampy">0</div>
      <div class="stat-sub">Nahlášení závad</div>
    </button>
    <button class="stat-card" data-category="zelen">
      <div class="stat-top">
        <span class="stat-label">Údržba zeleně</span>
        <span class="stat-chip">Plán</span>
      </div>
      <div class="stat-value" id="countZelen">0</div>
      <div class="stat-sub" id="zelenSummary">Poslední sečení: –</div>
    </button>
  </div>
</section>

<div class="view-container">
  <div class="map-overlay" id="mapOverlay">
    <div class="layer-switcher hidden" id="greenspaceLayers" aria-label="Vrstevník údržby zeleně">
      <div class="layer-switcher-title">Údržba zeleně</div>
      <label class="layer-switcher-row">
        <input type="checkbox" data-greenspace-layer="trava" checked />
        <span>Tráva</span>
      </label>
      <label class="layer-switcher-row">
        <input type="checkbox" data-greenspace-layer="zahony" checked />
        <span>Záhony</span>
      </label>
    </div>
  </div>
  <div id="mapView" class="view map-view">
    <div id="map" aria-label="Mapa údržby obce Běloky"></div>
  </div>
  <section id="streamView" class="view stream-view hidden" aria-label="Hladina potoka a počasí">
    <div class="stream-grid">
      <div class="stream-card chart-card">
        <div class="chart-header">
          <div>
            <div class="eyebrow">Trend</div>
            <div class="headline small">Posledních 24 hodin</div>
            <div class="chart-sub">CSV + live hodnoty, včetně povodňových stupňů</div>
          </div>
          <div class="chart-actions">
            <button class="chart-refresh" id="refreshStreamBtn" type="button" aria-label="Obnovit data hladiny">
              ↻ Obnovit
            </button>
            <span class="stat-chip subtle">Live</span>
          </div>
        </div>
        <div class="legend" aria-hidden="true">
          <div class="legend-item"><span class="legend-swatch level"></span>Hladina (cm)</div>
          <div class="legend-item"><span class="legend-swatch spa1"></span>SPA 1 · 90 cm</div>
          <div class="legend-item"><span class="legend-swatch spa2"></span>SPA 2 · 100 cm</div>
          <div class="legend-item"><span class="legend-swatch spa3"></span>SPA 3 · 120 cm</div>
        </div>
        <svg id="levelChart" viewBox="0 0 720 320" role="img" aria-label="Graf hladiny potoka"></svg>
      </div>
        <div class="stream-card hero">
          <div class="eyebrow">Hladina potoka</div>
          <div class="stream-headline">Live přehled</div>
          <p class="stream-sub">Aktuální úroveň vody a meteo kontext v jednom panelu.</p>
          <p class="stream-sub">
          Data přejímáme z
          <a
            href="http://hladiny-vox.pwsplus.eu/Senzors/Details/24470"
            target="_blank"
            rel="noopener noreferrer"
          >
            hladiny-vox.pwsplus.eu (#24470)
          </a>
          . Pro nejčerstvější informace přejděte přímo na tuto adresu.
        </p>
        <div class="stream-stats">
          <div class="stat">
            <div class="stat-label">Úroveň</div>
            <div class="stat-value" id="streamLevel">–</div>
            <div class="stat-sub" id="streamUpdated">Načítám…</div>
          </div>
          <div class="stat compact">
            <div class="stat-label">Senzor</div>
            <div class="stat-value">#24470</div>
            <div class="stat-sub">Běloky</div>
          </div>
          <div class="stat compact">
            <div class="stat-label">Zdroj</div>
            <div class="stat-value live" id="streamStatus">Načítám…</div>
            <div class="stat-sub">Online zdroj · hladiny-vox.pwsplus.eu</div>
          </div>
        </div>
        <a
          class="source-link"
          href="http://hladiny-vox.pwsplus.eu/Senzors/Details/24470"
          target="_blank"
          rel="noopener noreferrer"
        >
          Zdroj dat · hladiny-vox.pwsplus.eu (#24470)
        </a>
      </div>
      <div class="stream-card wide">
        <div class="chart-header">
          <div>
            <div class="eyebrow">ČR · počasí</div>
            <div class="headline small">Windy &amp; radar</div>
          </div>
          <span class="stat-chip subtle">Náhled</span>
        </div>
        <div class="weather-embeds inline">
          <div class="embed">
            <iframe
              title="Windy předpověď"
              class="locked-embed"
              src="https://embed.windy.com/embed2.html?lat=49.8175&lon=15.5&detailLat=50.1322&detailLon=14.222&width=100%&height=100%&zoom=7&level=surface&overlay=rain&product=ecmwf&menu=&message=true&type=map&location=coordinates&detail=true&metricWind=ms&metricTemp=%C2%B0C"
              frameborder="0"
              allow="geolocation"
              allowfullscreen
              loading="lazy"
              aria-label="Windy předpověď pro obec Běloky"
              onerror="console.warn('Windy iframe failed to load')"
            ></iframe>
          </div>
          <div class="embed">
            <iframe
              title="Radar srážek"
              class="locked-embed"
              src="https://embed.windy.com/embed2.html?lat=49.8175&lon=15.5&detailLat=50.1322&detailLon=14.222&width=100%&height=100%&zoom=7&level=surface&overlay=radar&product=ecmwf&menu=&message=true&type=map&location=coordinates&detail=true&metricWind=ms&metricTemp=%C2%B0C"
              frameborder="0"
              allow="geolocation"
              allowfullscreen
              loading="lazy"
              aria-label="Radar srážek pro obec Běloky"
              onerror="console.warn('Windy radar iframe failed to load')"
            ></iframe>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section id="wasteView" class="view waste-view hidden" aria-label="Odpad a sběrný dvůr">
    <div class="waste-grid">
      <div class="waste-card hero">
        <div class="eyebrow">Odpad &amp; sběrný dvůr</div>
        <div class="headline small">Každých 14 dní</div>
        <div class="mega-date" id="nextPickupDate">–</div>
        <div class="pill primary" id="nextPickupCountdown">Načítám…</div>
        <div class="waste-meta">
          <div>
            <div class="stat-label">Další svoz</div>
            <div class="stat-value" id="nextPickupLabel">–</div>
          </div>
          <div>
            <div class="stat-label">Poslední svoz</div>
            <div class="stat-value" id="lastPickupLabel">17.11.2025</div>
          </div>
          <div>
            <div class="stat-label">Cyklus</div>
            <div class="stat-value">Každých 14 dní</div>
          </div>
        </div>
      </div>
      <div class="waste-card overview">
        <div class="chart-header">
          <div>
            <div class="eyebrow">Harmonogram</div>
            <div class="headline small">Přehled svozu</div>
          </div>
          <span class="stat-chip subtle">Auto</span>
        </div>
        <div class="waste-list" id="upcomingPickups"></div>
      </div>
      <div class="waste-card info">
        <div class="eyebrow">Sběrný dvůr</div>
        <div class="headline small">Běloky</div>
        <ul class="info-list">
          <li><strong>Otevřeno:</strong> denně 8:00–20:00</li>
          <li><strong>Sobota 8:00–16:00:</strong> bioodpad (listí, tráva, větve)</li>
          <li><strong>Další odpad:</strong> přijímáme vše kromě nebezpečného odpadu a pneumatik</li>
          <li><a href="https://mapy.com/cs/zakladni?q=beloky&source=firm&id=13705403&ds=2&x=14.2214283&y=50.1310702&z=18" target="_blank" rel="noopener noreferrer">Zobrazit na mapě</a></li>
        </ul>
        <a class="button ghost" href="mailto:info@beloky.cz?subject=Odpad%20Běloky%20%7C%20Svoz%20nebo%20dv%C5%AFr" aria-label="Nahlásit problém se svozem nebo dvorem">
          Nahlásit problém
        </a>
      </div>
    </div>
  </section>
</div>
