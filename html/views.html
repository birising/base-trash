<section class="dashboard-strip" aria-label="RychlÃ© pÅ™ehledy">
  <div class="strip-header">
    <div>
      <div class="eyebrow">Dashboard</div>
      <div class="headline small">RychlÃ© pÅ™ehledy</div>
    </div>
  </div>
  <div class="summary-grid dashboard-grid">
    <button class="stat-card" data-category="odpad">
      <div class="stat-top">
        <span class="stat-label">KomunÃ¡lnÃ­ odpad</span>
        <span class="stat-chip">PlÃ¡n</span>
      </div>
      <div class="stat-value" id="countOdpad">â€“</div>
      <div class="stat-sub" id="wasteSbernyDvur">â€“</div>
    </button>
    <button class="stat-card" data-category="hladina">
      <div class="stat-top">
        <span class="stat-label">Hladina potoka</span>
        <span class="stat-chip">Live</span>
      </div>
      <div class="stat-value" id="countHladina">â€“</div>
      <div class="stat-sub" id="levelReading">NaÄÃ­tÃ¡mâ€¦</div>
    </button>
    <button class="stat-card" data-category="zavady">
      <div class="stat-top">
        <span class="stat-label">HlÃ¡Å¡enÃ© zÃ¡vady</span>
        <span class="stat-chip">AktivnÃ­</span>
      </div>
      <div class="stat-value" id="countZavady">0</div>
      <div class="stat-sub" id="zavadySummary">NevyÅ™eÅ¡enÃ© problÃ©my</div>
    </button>
  </div>
</section>

<div class="view-container">
  <div class="map-overlay" id="mapOverlay">
    <div class="greenspace-banner hidden" id="greenspaceBanner">
      <div class="greenspace-banner-content">
        <span class="greenspace-banner-icon">âš ï¸</span>
        <div class="greenspace-banner-text-wrapper">
          <span class="greenspace-banner-text">âš ï¸ NEOFICIÃLNÃ/NEZÃVISLÃ APLIKACE âš ï¸</span>
          <span class="greenspace-banner-subtext">Data mohou bÃ½t neaktuÃ¡lnÃ­</span>
        </div>
      </div>
    </div>
    <div class="layer-switcher hidden" id="greenspaceLayers" aria-label="VrstevnÃ­k ÃºdrÅ¾by zelenÄ›">
      <div class="layer-switcher-title">ÃšdrÅ¾ba zelenÄ›</div>
      <label class="layer-switcher-row">
        <input type="checkbox" data-greenspace-layer="trava" checked />
        <span>TrÃ¡va</span>
      </label>
      <label class="layer-switcher-row">
        <input type="checkbox" data-greenspace-layer="zahony" checked />
        <span>ZÃ¡hony</span>
      </label>
    </div>
    <div class="layer-switcher hidden" id="mapaLayers" aria-label="VrstevnÃ­k mapy">
      <div class="layer-switcher-title">Vrstvy mapy</div>
      <label class="layer-switcher-row">
        <input type="checkbox" data-map-layer="lampy" checked />
        <span>ğŸ’¡ Lampy</span>
      </label>
      <label class="layer-switcher-row">
        <input type="checkbox" data-map-layer="kose" checked />
        <span>ğŸ—‘ï¸ KoÅ¡e</span>
      </label>
      <label class="layer-switcher-row">
        <input type="checkbox" data-map-layer="zavady" checked />
        <span>ğŸ“ ZÃ¡vady</span>
      </label>
      <label class="layer-switcher-row">
        <input type="checkbox" data-map-layer="zelen" checked />
        <span>ğŸŒ¿ ZeleÅˆ</span>
      </label>
    </div>
  </div>
  <div id="mapView" class="view map-view hidden">
    <div id="map" aria-label="Mapa ÃºdrÅ¾by obce BÄ›loky"></div>
  </div>
  <section id="streamView" class="view stream-view hidden" aria-label="Hladina potoka a poÄasÃ­">
    <div class="stream-grid">
      <div class="stream-card chart-card">
        <div class="chart-header">
          <div>
            <div class="eyebrow">Trend</div>
            <div class="headline small">PoslednÃ­ch 12 hodin</div>
            <div class="chart-sub">CSV + live hodnoty, vÄetnÄ› povodÅˆovÃ½ch stupÅˆÅ¯</div>
          </div>
          <div class="chart-actions">
            <button class="chart-refresh" id="refreshStreamBtn" type="button" aria-label="Obnovit data hladiny">
              â†» Obnovit
            </button>
            <span class="stat-chip subtle">Live</span>
          </div>
        </div>
        <div class="legend" aria-hidden="true">
          <div class="legend-item"><span class="legend-swatch level"></span>Hladina (cm)</div>
          <div class="legend-item"><span class="legend-swatch spa1"></span>SPA 1 Â· 90 cm</div>
          <div class="legend-item"><span class="legend-swatch spa2"></span>SPA 2 Â· 100 cm</div>
          <div class="legend-item"><span class="legend-swatch spa3"></span>SPA 3 Â· 120 cm</div>
        </div>
        <svg id="levelChart" viewBox="0 0 720 320" role="img" aria-label="Graf hladiny potoka"></svg>
      </div>
        <div class="stream-card hero">
          <div class="eyebrow">Hladina potoka</div>
          <div class="stream-headline">Live pÅ™ehled</div>
          <p class="stream-sub">AktuÃ¡lnÃ­ ÃºroveÅˆ vody a meteo kontext v jednom panelu.</p>
          <p class="stream-sub">
          Data pÅ™ejÃ­mÃ¡me z
          <a
            href="http://hladiny-vox.pwsplus.eu/Senzors/Details/24470"
            target="_blank"
            rel="noopener noreferrer"
          >
            hladiny-vox.pwsplus.eu (#24470)
          </a>
          . Pro nejÄerstvÄ›jÅ¡Ã­ informace pÅ™ejdÄ›te pÅ™Ã­mo na tuto adresu.
        </p>
        <div class="stream-stats">
          <div class="stat">
            <div class="stat-label">ÃšroveÅˆ</div>
            <div class="stat-value" id="streamLevel">â€“</div>
            <div class="stat-sub" id="streamUpdated">NaÄÃ­tÃ¡mâ€¦</div>
          </div>
          <div class="stat compact">
            <div class="stat-label">Senzor</div>
            <div class="stat-value">#24470</div>
            <div class="stat-sub">BÄ›loky</div>
          </div>
          <div class="stat compact">
            <div class="stat-label">Zdroj</div>
            <div class="stat-value live" id="streamStatus">NaÄÃ­tÃ¡mâ€¦</div>
            <div class="stat-sub">Online zdroj Â· hladiny-vox.pwsplus.eu</div>
          </div>
        </div>
        <a
          class="source-link"
          href="http://hladiny-vox.pwsplus.eu/Senzors/Details/24470"
          target="_blank"
          rel="noopener noreferrer"
        >
          Zdroj dat Â· hladiny-vox.pwsplus.eu (#24470)
        </a>
      </div>
      <div class="stream-card wide">
        <div class="chart-header">
          <div>
            <div class="eyebrow">ÄŒR Â· poÄasÃ­</div>
            <div class="headline small">Windy &amp; radar</div>
          </div>
          <span class="stat-chip subtle">NÃ¡hled</span>
        </div>
        <div class="weather-embeds inline">
          <div class="embed">
            <iframe
              title="Windy pÅ™edpovÄ›Ä"
              class="locked-embed"
              src="https://embed.windy.com/embed2.html?lat=49.8175&lon=15.5&detailLat=50.1322&detailLon=14.222&width=100%&height=100%&zoom=7&level=surface&overlay=rain&product=ecmwf&menu=&message=true&type=map&location=coordinates&detail=true&metricWind=ms&metricTemp=%C2%B0C"
              frameborder="0"
              allow="geolocation"
              allowfullscreen
              loading="lazy"
              aria-label="Windy pÅ™edpovÄ›Ä pro obec BÄ›loky"
              onerror="console.warn('Windy iframe failed to load')"
            ></iframe>
          </div>
          <div class="embed">
            <iframe
              title="Radar srÃ¡Å¾ek"
              class="locked-embed"
              src="https://embed.windy.com/embed2.html?lat=49.8175&lon=15.5&detailLat=50.1322&detailLon=14.222&width=100%&height=100%&zoom=7&level=surface&overlay=radar&product=ecmwf&menu=&message=true&type=map&location=coordinates&detail=true&metricWind=ms&metricTemp=%C2%B0C"
              frameborder="0"
              allow="geolocation"
              allowfullscreen
              loading="lazy"
              aria-label="Radar srÃ¡Å¾ek pro obec BÄ›loky"
              onerror="console.warn('Windy radar iframe failed to load')"
            ></iframe>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section id="hasiciView" class="view hasici-view hidden" aria-label="ZÃ¡sahy hasiÄÅ¯">
    <div class="view-header">
      <div>
        <div class="eyebrow">ZÃ¡sahy JPO</div>
        <div class="headline">PoslednÃ­ zÃ¡sahy hasiÄÅ¯</div>
        <p class="subtitle">AktuÃ¡lnÃ­ zÃ¡sahy Jednotek poÅ¾Ã¡rnÃ­ ochrany StÅ™edoÄeskÃ©ho kraje</p>
      </div>
    </div>
    <div id="hasiciList" class="hasici-list">
      <div class="loading-state"><div class="loading-spinner"></div><span>NaÄÃ­tÃ¡m zÃ¡sahyâ€¦</span></div>
    </div>
  </section>
  <section id="kriminalitaView" class="view kriminalita-view hidden" aria-label="Kriminalita">
    <div class="view-header">
      <div>
        <div class="eyebrow">Kriminalita</div>
        <div class="headline">TrestnÃ¡ Äinnost v obci</div>
        <p class="subtitle">Data z <a href="https://kriminalita.policie.gov.cz" target="_blank" rel="noopener">kriminalita.policie.gov.cz</a></p>
      </div>
    </div>
    <div id="kriminalitaList" class="kriminalita-list">
      <div class="loading-state"><div class="loading-spinner"></div><span>NaÄÃ­tÃ¡m dataâ€¦</span></div>
    </div>
  </section>
  <section id="zavadyView" class="view zavady-view hidden" aria-label="HlÃ¡Å¡enÃ© zÃ¡vady">
    <div class="view-header">
      <div>
        <div class="eyebrow">HlÃ¡Å¡enÃ© zÃ¡vady</div>
        <div class="headline">PÅ™ehled nahlÃ¡Å¡enÃ½ch problÃ©mÅ¯</div>
        <p class="subtitle">Data z AWS S3</p>
      </div>
    </div>
    <div id="zavadyList" class="zavady-list">
      <div class="loading-state"><div class="loading-spinner"></div><span>NaÄÃ­tÃ¡m dataâ€¦</span></div>
    </div>
  </section>
  
  
  <!-- Modal for marking zavada as resolved -->
  <div id="resolveZavadaModal" class="report-zavada-modal hidden">
    <div class="report-zavada-modal-backdrop"></div>
    <div class="report-zavada-modal-content">
      <div class="report-zavada-modal-header">
        <h2>NahlÃ¡Å¡enÃ­ odstranÄ›nÃ­ zÃ¡vady</h2>
        <button class="report-zavada-modal-close" aria-label="ZavÅ™Ã­t">&times;</button>
      </div>
      <form id="resolveZavadaForm" class="report-zavada-form" action="https://formspree.io/f/xkgdbplk" method="POST">
        <input type="hidden" name="form_type" value="zavada_resolved">
        <input type="hidden" name="zavada_id" id="resolveZavadaId">
        <input type="hidden" name="zavada_category" id="resolveZavadaCategory">
        <input type="hidden" name="zavada_lat" id="resolveZavadaLat">
        <input type="hidden" name="zavada_lng" id="resolveZavadaLng">
        <input type="hidden" name="zavada_reported_date" id="resolveZavadaReportedDate">
        
        <div class="resolve-zavada-details">
          <h3>Detaily zÃ¡vady:</h3>
          <div class="resolve-zavada-detail-item">
            <strong>Popis:</strong>
            <span id="resolveZavadaDescription"></span>
          </div>
          <div class="resolve-zavada-detail-item">
            <strong>Kategorie:</strong>
            <span id="resolveZavadaCategoryLabel"></span>
          </div>
          <div class="resolve-zavada-detail-item">
            <strong>GPS souÅ™adnice:</strong>
            <span id="resolveZavadaGPS"></span>
          </div>
          <div class="resolve-zavada-detail-item">
            <strong>Datum nahlÃ¡Å¡enÃ­:</strong>
            <span id="resolveZavadaReportedDateLabel"></span>
          </div>
        </div>
        
        <label class="report-zavada-form-label">
          VÃ¡Å¡ email (volitelnÃ©):
          <input type="email" name="email" class="report-zavada-form-input" placeholder="vas@email.cz">
        </label>
        <label class="report-zavada-form-label">
          PoznÃ¡mka (volitelnÃ©):
          <textarea name="note" rows="3" class="report-zavada-form-textarea" placeholder="DoplÅˆujÃ­cÃ­ informace o odstranÄ›nÃ­ zÃ¡vady..."></textarea>
        </label>
        <div class="report-zavada-form-actions">
          <button type="button" class="report-zavada-form-cancel">ZruÅ¡it</button>
          <button type="submit" class="report-zavada-form-submit">Odeslat</button>
        </div>
      </form>
    </div>
  </div>
  
  <section id="wasteView" class="view waste-view hidden" aria-label="Odpad a sbÄ›rnÃ½ dvÅ¯r">
    <div class="waste-grid">
        <div class="waste-card hero">
        <div class="eyebrow">KomunÃ¡lnÃ­ odpad</div>
        <div class="headline small" id="nextPickupDateLabel">â€“</div>
        <div class="mega-date" id="nextPickupDate">â€“</div>
        <div class="pill primary" id="nextPickupCountdown">NaÄÃ­tÃ¡mâ€¦</div>
        <div class="waste-meta">
          <div>
            <div class="stat-label">PoslednÃ­ svoz</div>
            <div class="stat-value" id="lastPickupLabel">01.12.2025</div>
          </div>
          <div>
            <div class="stat-label">Cyklus</div>
            <div class="stat-value">KaÅ¾dÃ½ch 14 dnÃ­</div>
          </div>
        </div>
      </div>
      <div class="waste-card info">
        <div class="eyebrow">SbÄ›rnÃ½ dvÅ¯r</div>
        <div class="headline small">BÄ›loky</div>
        <ul class="info-list">
          <li><strong>OtevÅ™eno:</strong> dennÄ› 8:00â€“20:00</li>
          <li><strong>Sobota 8:00â€“16:00:</strong> bioodpad (listÃ­, trÃ¡va, vÄ›tve)</li>
          <li><strong>DalÅ¡Ã­ odpad:</strong> pÅ™ijÃ­mÃ¡me vÅ¡e kromÄ› nebezpeÄnÃ©ho odpadu a pneumatik</li>
          <li><a href="https://mapy.com/cs/zakladni?q=beloky&source=firm&id=13705403&ds=2&x=14.2214283&y=50.1310702&z=18" target="_blank" rel="noopener noreferrer">Zobrazit na mapÄ›</a></li>
        </ul>
        <a class="button ghost" href="mailto:info@beloky.cz?subject=Odpad%20BÄ›loky%20%7C%20Svoz%20nebo%20dv%C5%AFr" aria-label="NahlÃ¡sit problÃ©m se svozem nebo dvorem">
          NahlÃ¡sit problÃ©m
        </a>
      </div>
    </div>
  </section>
</div>
